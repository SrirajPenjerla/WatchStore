{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../../services/product.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction AdminProductFormComponent_span_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 43);\n  }\n}\nfunction AdminProductFormComponent_div_86_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 44)(2, \"div\", 45);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nclass AdminProductFormComponent {\n  constructor(fb, productService, route, router) {\n    this.fb = fb;\n    this.productService = productService;\n    this.route = route;\n    this.router = router;\n    this.isEditMode = false;\n    this.isLoading = false;\n    this.error = null;\n    this.productForm = this.fb.group({\n      name: ['', Validators.required],\n      brand: ['', Validators.required],\n      description: ['', Validators.required],\n      price: [0, [Validators.required, Validators.min(0)]],\n      stock: [0, [Validators.required, Validators.min(0)]],\n      imageUrl: ['', [Validators.required, Validators.pattern('https?://.+')]],\n      category: ['', Validators.required],\n      isTrending: [false]\n    });\n  }\n  ngOnInit() {\n    const productId = this.route.snapshot.paramMap.get('id');\n    if (productId) {\n      this.isEditMode = true;\n      this.loadProduct(Number(productId));\n    }\n  }\n  loadProduct(id) {\n    this.isLoading = true;\n    this.error = null;\n    this.productService.getProduct(id).subscribe({\n      next: product => {\n        this.productForm.patchValue(product);\n        this.isLoading = false;\n      },\n      error: error => {\n        this.error = 'Error loading product.';\n        this.isLoading = false;\n      }\n    });\n  }\n  onSubmit() {\n    if (this.productForm.invalid) {\n      return;\n    }\n    this.isLoading = true;\n    this.error = null;\n    const productData = this.productForm.value;\n    const request = this.isEditMode ? this.productService.updateProduct(Number(this.route.snapshot.paramMap.get('id')), productData) : this.productService.createProduct(productData);\n    request.subscribe({\n      next: () => {\n        this.router.navigate(['/admin/products']);\n      },\n      error: error => {\n        this.error = `Error ${this.isEditMode ? 'updating' : 'creating'} product.`;\n        this.isLoading = false;\n      }\n    });\n  }\n  // Form getters\n  get name() {\n    return this.productForm.get('name');\n  }\n  get brand() {\n    return this.productForm.get('brand');\n  }\n  get description() {\n    return this.productForm.get('description');\n  }\n  get price() {\n    return this.productForm.get('price');\n  }\n  get stock() {\n    return this.productForm.get('stock');\n  }\n  get imageUrl() {\n    return this.productForm.get('imageUrl');\n  }\n  get category() {\n    return this.productForm.get('category');\n  }\n  static {\n    this.ɵfac = function AdminProductFormComponent_Factory(t) {\n      return new (t || AdminProductFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminProductFormComponent,\n      selectors: [[\"app-admin-product-form\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 87,\n      vars: 28,\n      consts: [[1, \"container\"], [1, \"mb-4\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"name\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", 1, \"form-control\"], [1, \"invalid-feedback\"], [\"for\", \"brand\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"brand\", \"formControlName\", \"brand\", 1, \"form-control\"], [\"for\", \"description\", 1, \"form-label\"], [\"id\", \"description\", \"formControlName\", \"description\", \"rows\", \"3\", 1, \"form-control\"], [1, \"col-md-6\", \"mb-3\"], [\"for\", \"price\", 1, \"form-label\"], [1, \"input-group\"], [1, \"input-group-text\"], [\"type\", \"number\", \"id\", \"price\", \"formControlName\", \"price\", \"min\", \"0\", \"step\", \"0.01\", 1, \"form-control\"], [\"for\", \"stock\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"stock\", \"formControlName\", \"stock\", \"min\", \"0\", 1, \"form-control\"], [\"for\", \"imageUrl\", 1, \"form-label\"], [\"type\", \"url\", \"id\", \"imageUrl\", \"formControlName\", \"imageUrl\", 1, \"form-control\"], [\"for\", \"category\", 1, \"form-label\"], [\"id\", \"category\", \"formControlName\", \"category\", 1, \"form-select\"], [\"value\", \"\"], [\"value\", \"Luxury\"], [\"value\", \"Sport\"], [\"value\", \"Classic\"], [\"value\", \"Smart\"], [1, \"d-flex\", \"justify-content-between\"], [\"type\", \"button\", \"routerLink\", \"/admin/products\", 1, \"btn\", \"btn-outline-secondary\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-2\", \"role\", \"status\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"card-title\"], [1, \"text-center\", \"mb-3\"], [1, \"img-fluid\", \"rounded\", 2, \"max-height\", \"200px\", \"object-fit\", \"contain\", 3, \"src\", \"alt\"], [1, \"mb-1\"], [1, \"text-muted\", \"mb-1\"], [1, \"mb-0\"], [\"class\", \"row\", 4, \"ngIf\"], [\"role\", \"status\", 1, \"spinner-border\", \"spinner-border-sm\", \"me-2\"], [1, \"col-12\"], [1, \"alert\", \"alert-danger\"]],\n      template: function AdminProductFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"form\", 6);\n          i0.ɵɵlistener(\"ngSubmit\", function AdminProductFormComponent_Template_form_ngSubmit_7_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(8, \"div\", 7)(9, \"label\", 8);\n          i0.ɵɵtext(10, \"Product Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 9);\n          i0.ɵɵelementStart(12, \"div\", 10);\n          i0.ɵɵtext(13, \" Product name is required \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"div\", 7)(15, \"label\", 11);\n          i0.ɵɵtext(16, \"Brand\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(17, \"input\", 12);\n          i0.ɵɵelementStart(18, \"div\", 10);\n          i0.ɵɵtext(19, \" Brand is required \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 7)(21, \"label\", 13);\n          i0.ɵɵtext(22, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"textarea\", 14);\n          i0.ɵɵelementStart(24, \"div\", 10);\n          i0.ɵɵtext(25, \" Description is required \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"div\", 2)(27, \"div\", 15)(28, \"label\", 16);\n          i0.ɵɵtext(29, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 17)(31, \"span\", 18);\n          i0.ɵɵtext(32, \"$\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(33, \"input\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"div\", 10);\n          i0.ɵɵtext(35, \" Please enter a valid price \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"div\", 15)(37, \"label\", 20);\n          i0.ɵɵtext(38, \"Stock\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(39, \"input\", 21);\n          i0.ɵɵelementStart(40, \"div\", 10);\n          i0.ɵɵtext(41, \" Please enter a valid stock quantity \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(42, \"div\", 7)(43, \"label\", 22);\n          i0.ɵɵtext(44, \"Image URL\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(45, \"input\", 23);\n          i0.ɵɵelementStart(46, \"div\", 10);\n          i0.ɵɵtext(47, \" Please enter a valid image URL \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(48, \"div\", 7)(49, \"label\", 24);\n          i0.ɵɵtext(50, \"Category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(51, \"select\", 25)(52, \"option\", 26);\n          i0.ɵɵtext(53, \"Select a category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(54, \"option\", 27);\n          i0.ɵɵtext(55, \"Luxury\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(56, \"option\", 28);\n          i0.ɵɵtext(57, \"Sport\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(58, \"option\", 29);\n          i0.ɵɵtext(59, \"Classic\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(60, \"option\", 30);\n          i0.ɵɵtext(61, \"Smart\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(62, \"div\", 10);\n          i0.ɵɵtext(63, \" Please select a category \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(64, \"div\", 31)(65, \"button\", 32);\n          i0.ɵɵtext(66, \" Cancel \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"button\", 33);\n          i0.ɵɵtemplate(68, AdminProductFormComponent_span_68_Template, 1, 0, \"span\", 34);\n          i0.ɵɵtext(69);\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(70, \"div\", 35)(71, \"div\", 4)(72, \"div\", 5)(73, \"h5\", 36);\n          i0.ɵɵtext(74, \"Product Preview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(75, \"div\", 37);\n          i0.ɵɵelement(76, \"img\", 38);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(77, \"h6\", 39);\n          i0.ɵɵtext(78);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(79, \"p\", 40);\n          i0.ɵɵtext(80);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(81, \"p\", 39);\n          i0.ɵɵtext(82);\n          i0.ɵɵpipe(83, \"currency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(84, \"p\", 41);\n          i0.ɵɵtext(85);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵtemplate(86, AdminProductFormComponent_div_86_Template, 4, 1, \"div\", 42);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          let tmp_12_0;\n          let tmp_13_0;\n          let tmp_14_0;\n          let tmp_15_0;\n          let tmp_16_0;\n          let tmp_17_0;\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.isEditMode ? \"Edit Product\" : \"Add New Product\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.name == null ? null : ctx.name.invalid) && (ctx.name == null ? null : ctx.name.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.brand == null ? null : ctx.brand.invalid) && (ctx.brand == null ? null : ctx.brand.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.description == null ? null : ctx.description.invalid) && (ctx.description == null ? null : ctx.description.touched));\n          i0.ɵɵadvance(10);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.price == null ? null : ctx.price.invalid) && (ctx.price == null ? null : ctx.price.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.stock == null ? null : ctx.stock.invalid) && (ctx.stock == null ? null : ctx.stock.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.imageUrl == null ? null : ctx.imageUrl.invalid) && (ctx.imageUrl == null ? null : ctx.imageUrl.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"is-invalid\", (ctx.category == null ? null : ctx.category.invalid) && (ctx.category == null ? null : ctx.category.touched));\n          i0.ɵɵadvance(16);\n          i0.ɵɵproperty(\"disabled\", ctx.productForm.invalid || ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Update Product\" : \"Add Product\", \" \");\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"src\", ((tmp_12_0 = ctx.productForm.get(\"imageUrl\")) == null ? null : tmp_12_0.value) || \"assets/placeholder.png\", i0.ɵɵsanitizeUrl)(\"alt\", (tmp_13_0 = ctx.productForm.get(\"name\")) == null ? null : tmp_13_0.value);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(((tmp_14_0 = ctx.productForm.get(\"name\")) == null ? null : tmp_14_0.value) || \"Product Name\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(((tmp_15_0 = ctx.productForm.get(\"brand\")) == null ? null : tmp_15_0.value) || \"Brand\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(83, 26, ((tmp_16_0 = ctx.productForm.get(\"price\")) == null ? null : tmp_16_0.value) || 0));\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Stock: \", ((tmp_17_0 = ctx.productForm.get(\"stock\")) == null ? null : tmp_17_0.value) || 0, \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n        }\n      },\n      dependencies: [CommonModule, i4.NgIf, i4.CurrencyPipe, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName, RouterModule, i3.RouterLink],\n      encapsulation: 2\n    });\n  }\n}\nexport { AdminProductFormComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}