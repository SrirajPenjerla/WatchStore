{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../../shared/services/toast.service\";\nimport * as i4 from \"../../../cart/services/order.service\";\nimport * as i5 from \"@angular/common\";\nfunction ProfileComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Please log in to view your profile. \");\n    i0.ɵɵelementStart(2, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_7_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.goToLogin());\n    });\n    i0.ɵɵtext(3, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProfileComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 15)(2, \"label\", 16);\n    i0.ɵɵtext(3, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 15)(6, \"label\", 16);\n    i0.ɵɵtext(7, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 15)(10, \"label\", 16);\n    i0.ɵɵtext(11, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 15)(14, \"label\", 16);\n    i0.ɵɵtext(15, \"User ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r1.user.firstName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r1.user.lastName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r1.user.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r1.user.id);\n  }\n}\nfunction ProfileComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Please log in to view your order history. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"span\", 21);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ProfileComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.error, \" \");\n  }\n}\nfunction ProfileComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1, \" You don't have any orders yet. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_div_18_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r10.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 4, order_r10.orderDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 6, order_r10.total));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(order_r10.status);\n  }\n}\nfunction ProfileComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"table\", 25)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Order ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Status\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, ProfileComponent_div_18_tr_13_Template, 11, 8, \"tr\", 26);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.orders);\n  }\n}\nclass ProfileComponent {\n  constructor(authService, router, toastService, orderService) {\n    this.authService = authService;\n    this.router = router;\n    this.toastService = toastService;\n    this.orderService = orderService;\n    this.user = null;\n    this.orders = [];\n    this.loading = false;\n    this.error = '';\n  }\n  ngOnInit() {\n    // Load user profile\n    this.loadUserProfile();\n  }\n  loadUserProfile() {\n    if (this.authService.isAuthenticated()) {\n      this.authService.currentUser$.subscribe(user => {\n        this.user = user;\n        console.log('Profile loaded:', this.user);\n        // Load orders if user is authenticated\n        if (this.user) {\n          this.loadOrders();\n        }\n      });\n    } else {\n      console.log('User not authenticated');\n      this.toastService.warning('Please log in to view your profile');\n    }\n  }\n  loadOrders() {\n    this.loading = true;\n    this.error = '';\n    this.orderService.getUserOrders().subscribe({\n      next: orders => {\n        console.log('Orders loaded:', orders);\n        this.orders = orders;\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error loading orders:', error);\n        this.error = 'Failed to load orders. Please try again.';\n        this.loading = false;\n        this.toastService.error('Failed to load orders. Please try again.');\n      }\n    });\n  }\n  goToLogin() {\n    this.router.navigate(['/auth/login']);\n  }\n  static {\n    this.ɵfac = function ProfileComponent_Factory(t) {\n      return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastService), i0.ɵɵdirectiveInject(i4.OrderService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfileComponent,\n      selectors: [[\"app-profile\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 19,\n      vars: 7,\n      consts: [[1, \"container\", \"py-5\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"col-md-8\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"alert\", \"alert-warning\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", \"ms-2\", 3, \"click\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"email\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"text-center\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-info\"], [1, \"table-responsive\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function ProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n          i0.ɵɵtext(6, \"Profile Information\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(7, ProfileComponent_div_7_Template, 4, 0, \"div\", 6);\n          i0.ɵɵtemplate(8, ProfileComponent_div_8_Template, 17, 4, \"div\", 7);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 3)(11, \"div\", 4)(12, \"h5\", 5);\n          i0.ɵɵtext(13, \"Order History\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(14, ProfileComponent_div_14_Template, 2, 0, \"div\", 6);\n          i0.ɵɵtemplate(15, ProfileComponent_div_15_Template, 4, 0, \"div\", 9);\n          i0.ɵɵtemplate(16, ProfileComponent_div_16_Template, 2, 1, \"div\", 10);\n          i0.ɵɵtemplate(17, ProfileComponent_div_17_Template, 2, 0, \"div\", 11);\n          i0.ɵɵtemplate(18, ProfileComponent_div_18_Template, 14, 1, \"div\", 12);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", !ctx.user);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.user);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", !ctx.user);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.user && !ctx.loading && !ctx.error && ctx.orders.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.user && !ctx.loading && !ctx.error && ctx.orders.length > 0);\n        }\n      },\n      dependencies: [CommonModule, i5.NgForOf, i5.NgIf, i5.CurrencyPipe, i5.DatePipe, FormsModule, RouterModule],\n      styles: [\".card[_ngcontent-%COMP%] {\\n      border: 1px solid #c5a47e;\\n      border-radius: 8px;\\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\\n    }\\n    .card-title[_ngcontent-%COMP%] {\\n      color: #1a1a1a;\\n      border-bottom: 2px solid #c5a47e;\\n      padding-bottom: 0.5rem;\\n      margin-bottom: 1.5rem;\\n    }\\n    .form-control[_ngcontent-%COMP%]:read-only {\\n      background-color: #f8f8f8;\\n    }\"]\n    });\n  }\n}\nexport { ProfileComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}