{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ProductCardComponent } from '../product-card/product-card.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/product.service\";\nimport * as i2 from \"../../../cart/services/cart.service\";\nimport * as i3 from \"../../../../shared/services/toast.service\";\nimport * as i4 from \"../../../../services/auth.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction ProductListComponent_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r6, \" \");\n  }\n}\nfunction ProductListComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const brand_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", brand_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", brand_r7, \" \");\n  }\n}\nfunction ProductListComponent_app_product_card_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-card\", 16);\n    i0.ɵɵlistener(\"addToCart\", function ProductListComponent_app_product_card_23_Template_app_product_card_addToCart_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.addToCart($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"product\", product_r8);\n  }\n}\nfunction ProductListComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Loading products... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductListComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.error, \" \");\n  }\n}\nfunction ProductListComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \" No products found. \");\n    i0.ɵɵelementEnd();\n  }\n}\nclass ProductListComponent {\n  constructor(productService, cartService, toastService, authService, router) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.toastService = toastService;\n    this.authService = authService;\n    this.router = router;\n    this.products = [];\n    this.loading = false;\n    this.error = null;\n    this.categories = [];\n    this.brands = [];\n    this.selectedCategory = '';\n    this.selectedBrand = '';\n    this.sortField = 'price';\n    this.sortDirection = 'asc';\n  }\n  ngOnInit() {\n    this.loadProducts();\n  }\n  loadProducts() {\n    this.loading = true;\n    this.error = null;\n    const filters = {\n      category: this.selectedCategory || undefined,\n      brand: this.selectedBrand || undefined\n    };\n    const sort = {\n      field: this.sortField,\n      direction: this.sortDirection\n    };\n    this.productService.getProducts(filters, sort).subscribe({\n      next: products => {\n        this.products = products;\n        this.loading = false;\n      },\n      error: error => {\n        this.error = 'Failed to load products. Please try again later.';\n        this.loading = false;\n        this.toastService.error('Failed to load products. Please try again later.');\n      }\n    });\n  }\n  applyFilters() {\n    this.loadProducts();\n  }\n  applySort() {\n    this.loadProducts();\n  }\n  addToCart(product) {\n    if (!this.authService.isAuthenticated()) {\n      this.toastService.warning('Please log in to add items to cart');\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n    this.cartService.addToCart(product.id.toString(), 1).subscribe({\n      next: () => {\n        this.toastService.success('Item added to cart');\n      },\n      error: error => {\n        console.error('Error adding to cart:', error);\n        this.toastService.error('Failed to add item to cart');\n      }\n    });\n  }\n  static {\n    this.ɵfac = function ProductListComponent_Factory(t) {\n      return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.ToastService), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i5.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductListComponent,\n      selectors: [[\"app-product-list\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 27,\n      vars: 10,\n      consts: [[1, \"product-list\"], [1, \"filters\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"price\"], [\"value\", \"name\"], [\"value\", \"brand\"], [\"value\", \"asc\"], [\"value\", \"desc\"], [1, \"products-grid\"], [3, \"product\", \"addToCart\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [\"class\", \"no-products\", 4, \"ngIf\"], [3, \"value\"], [3, \"product\", \"addToCart\"], [1, \"loading\"], [1, \"error\"], [1, \"no-products\"]],\n      template: function ProductListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"select\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_select_ngModelChange_2_listener($event) {\n            return ctx.selectedCategory = $event;\n          })(\"change\", function ProductListComponent_Template_select_change_2_listener() {\n            return ctx.applyFilters();\n          });\n          i0.ɵɵelementStart(3, \"option\", 3);\n          i0.ɵɵtext(4, \"All Categories\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, ProductListComponent_option_5_Template, 2, 2, \"option\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"select\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_select_ngModelChange_6_listener($event) {\n            return ctx.selectedBrand = $event;\n          })(\"change\", function ProductListComponent_Template_select_change_6_listener() {\n            return ctx.applyFilters();\n          });\n          i0.ɵɵelementStart(7, \"option\", 3);\n          i0.ɵɵtext(8, \"All Brands\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, ProductListComponent_option_9_Template, 2, 2, \"option\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"select\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_select_ngModelChange_10_listener($event) {\n            return ctx.sortField = $event;\n          })(\"change\", function ProductListComponent_Template_select_change_10_listener() {\n            return ctx.applySort();\n          });\n          i0.ɵɵelementStart(11, \"option\", 5);\n          i0.ɵɵtext(12, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"option\", 6);\n          i0.ɵɵtext(14, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"option\", 7);\n          i0.ɵɵtext(16, \"Brand\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"select\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_select_ngModelChange_17_listener($event) {\n            return ctx.sortDirection = $event;\n          })(\"change\", function ProductListComponent_Template_select_change_17_listener() {\n            return ctx.applySort();\n          });\n          i0.ɵɵelementStart(18, \"option\", 8);\n          i0.ɵɵtext(19, \"Ascending\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"option\", 9);\n          i0.ɵɵtext(21, \"Descending\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(22, \"div\", 10);\n          i0.ɵɵtemplate(23, ProductListComponent_app_product_card_23_Template, 1, 1, \"app-product-card\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, ProductListComponent_div_24_Template, 2, 0, \"div\", 12);\n          i0.ɵɵtemplate(25, ProductListComponent_div_25_Template, 2, 1, \"div\", 13);\n          i0.ɵɵtemplate(26, ProductListComponent_div_26_Template, 2, 0, \"div\", 14);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngModel\", ctx.selectedCategory);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.selectedBrand);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.brands);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.sortField);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngModel\", ctx.sortDirection);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngForOf\", ctx.products);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && ctx.products.length === 0);\n        }\n      },\n      dependencies: [CommonModule, i6.NgForOf, i6.NgIf, FormsModule, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgModel, ProductCardComponent],\n      styles: [\".product-list[_ngcontent-%COMP%] {\\n      padding: 20px;\\n    }\\n\\n    .filters[_ngcontent-%COMP%] {\\n      display: flex;\\n      gap: 10px;\\n      margin-bottom: 20px;\\n    }\\n\\n    .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\n      padding: 8px;\\n      border: 1px solid #ddd;\\n      border-radius: 4px;\\n    }\\n\\n    .products-grid[_ngcontent-%COMP%] {\\n      display: grid;\\n      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\\n      gap: 20px;\\n    }\\n\\n    .loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .no-products[_ngcontent-%COMP%] {\\n      text-align: center;\\n      padding: 20px;\\n      font-size: 1.2em;\\n    }\\n\\n    .error[_ngcontent-%COMP%] {\\n      color: #e74c3c;\\n    }\"]\n    });\n  }\n}\nexport { ProductListComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}